>对于从SOC官网，或着github拉下来的内核，对其编译的过程已经有了大致的了解，并且适用与所有的Linux内核

---
### 以openwrt和raspbeyypi为例子

		这两个系统都是linux系统，从github上拉下来的时候目录结构都是类似的。
		拉下来的内核都需要经过编译才能移植到开发板，这个编译的目的是依据配置生成 .config文件。

#### 1、准备内核的编译环境
		有趣的是，raspbrry的内核编译几乎是原生的linux，因此在github的readme文件上并没有说还需要哪些工具的支持。也可能在官网的帮助文档有写但我没有看见。
		而openwrt因为其软路由可定制的特点，它的自由度相当高，因此很多大牛都对内核做过设计，需要的适配工具就很多，搭建内核的编译环境前，这些工具不可缺少。

Readme提示的openwrt编译依赖工具
![[Pasted image 20230323152522.png]]
在官网，甚至贴心的连命令模板都准备好了
![[Pasted image 20230323152712.png]]

#### 2、配置 .config文件
		只有当环境准备齐全！！！！！！！！！才可以进行内核的配置。
		make menuconfig 在内核文件的根目录下执行，会唤出一个类似bios的配置菜单。它是linux内核可裁剪的体现。这个菜单的原理，其实是 make menuconfig，会收集整个内核目录下的 config/Kconfig文件统计而来的。
		Kconfig是一些默认配置，或者说驱动的描述文件。他辅助 menuconfig，生成一个可视的操纵界面，帮助我们自定义一个内核的配置。

一个 menuconfig
![[Pasted image 20230323153307.png]]

		我们在这里，配置内核的芯片支持，开发型号，默认驱动包，基础工具链，等等。
		它本身以有默认设置，一般无特殊需求，我们配置好芯片支持，开发板型号，直接save 后 load 就可以生成一个带默认功能的内核描述文件 .config。

		当然，树莓派是一个完整的生态链，他的制作厂家，会在内核包中，放置一个，和芯片型号对应 _defconfig文件，这个文件也是默认的内核配置。

_要通过这个文件生成 .config文件，就要需要到arch工具，具体见[内核移植]_	

		如果说，后续我们自己，希望往内核里添加驱动，目前我学会的方式，就是配置一个自己的Kconfig,执行make menuconfig，将我的驱动选项显示在内核配置菜单上。


### 3、编译内核

		得到 .config之后就可以编译内核了，但也并不意味着一帆风顺。make编译的命令花样繁多，如是是树莓派的直接make,他就更复杂了，终究是要去阅读官方的手册的。
		而openwrt则会依据.config一路向下。
		最终都会生成image的镜像文件。烧入SD卡。
		
