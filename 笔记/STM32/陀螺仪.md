		陀螺仪，简称脱落，又称为角速度传感器，用于测量、控制物体在相对惯性空间中的角运动的惯性检测器件。(Gyro scope).
		陀螺仪可以分为机电式陀螺仪（经典力学），光电陀螺仪（近代物理学效应）。
		主要是将旋转物体的角速度，转换成与角速度成正比的直流电压信号。



## STM32 IIC
		主要使用主模式：
		主模式下IIC接口会启动数据传输并产生时钟信号。由软件置位CR1寄存器的Star位，主动发出一个起始信号，发出起始信号后，IIC模式自动切换为主机发送端。

>主模式有以下要求：
>1、CR2寄存器中，已经完成对时钟信号的时序配置；
>2、时钟控制寄存器已经配置完毕；
>3、上升事件寄存器已经配置完毕；
>4、IIC_CR1寄存器配置完毕，可IIC使能·；
>5、主动置位 CR1寄存器的Star位。

		主动将Star位置位为1后，STM32自动检测SR2寄存器的BUSY位，此位清零后，自动在总线上生成一个起始位。BUSY位由硬件自动清零和置位，用于判断IIC总线是否空闲。
		主设备之后会等待软件对SR1执行读操作，之后把设备地址写入DR寄存器，由DR寄存器将数据利用内部移位寄存器串行送出SDA。地址进入DR寄存器后，还要清零ADDR寄存器，才会将地址送出。
		<Star位如果不清0的话，会再每一个数据发送完毕之后又生成一个重复起始位。>有待验证

>从地址传输：
>1、从机检测到总线上的起始信号后，回读取接下来收到的IIC地址和读写位数据；
>2、接收到数据后返回一个ACK脉冲；
## IIM42652
>- 3轴MEMS速率陀螺仪、16位ADC与信号自整定；
>- 3轴MEMS加速度计，16位ADC与信号自整定；
>- 支持I3C，I2C，SPI串行通信接口
>- 可自检测
>- 可调时钟源
>- 传感器数据寄存器
>- FIFO
>- 中断
>- 数字量输出的温度传感器
>- 偏置与LDOs
>- Charge Pump 电荷泵
>- 标准电源模式

#### 1、陀螺仪和加速度计
		IIM42652的三轴陀螺仪可以检测X轴，Y轴，Z轴的旋转。但u欧洛依围绕任何一个检测的轴进行旋转时，科氏效应的影响下引发的震动会被电容式拾音器检测到，由此残生的信号通过放大，调节，滤波，从而产生和角速度成正比的电压。利用片上ADC对每个轴产生的电压进行采样，即可得到数字量的角速度。
		角速度的每一次测量误差都会因积分运算而累积下来，因此需要加速度计测量出物体在相对水平面上的倾角，结合陀螺仪的角速度，计算出测量物体正确的姿态角。(电机中则是正确的转过的角度)。

#### 2、自检测
#### 3、可调时钟源
		IIM42652内部时钟源可用于内部电路入信号调节，ADC以及控制电路和寄存器。
		外部引脚--CLKIN--支持从外部引入时钟，支持31KHZ--50KHZ的高精度时钟输入。

#### 4、传感器数据寄存器
		这个寄存器中包含最新的，通过陀螺仪、加速度计和温度检测的数据。这个寄存器为只读寄存器，并可通过串口随时访问。

#### 5、中断
		中断功能通过中断配置寄存器来设置。

#### 6、数字温度传感器
		用于检测IIM42652的芯片温度，ADC的读书可以从FIFO或者传感器数据寄存器读取。
		通过如下公式将读取到的数据转化为常见的摄氏度单位：
		温度(摄氏度)= (TEMP_DATA / 132.48) + 25。
		如果是存储在FIFO中的温度数据，可以是16位存储或8位存储，16位存储时采用：
		温度单位:摄氏度= (FIFO_TEMP_DATA / 2.07) + 25

#### 7、不同的电源模式
		不同的电源模式下，陀螺仪和加速度计不都是开启的，如下表：

![[Pasted image 20231221162709.png]]


---
>1、陷滤波器，**通过设置相应的滤波器参数，可以实现指定频段内信号的滤除**，除了需要滤除的频率的幅值增幅为0，其他幅值增幅均为1，如此，经过此滤波器的信号，在指定频率的信号都会被滤除。如下图：

![[Pasted image 20231222090241.png]]

红色为陷波滤波前的信号，蓝色为陷波滤波后的信号，可以看到经过陷波滤波器后，信号的简谐振动现象被很好的抑制住，有利于信号的分析与处理。



