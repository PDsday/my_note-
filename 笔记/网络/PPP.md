>PPP协议是数据链路层协议，指的是Point to Point Protocol

---
## 数据链路层
>数据链路层和物理层已经非常接近，它们建立的通信通道各不相同，物理层构建的是*物理链路*，而数据链路层构建的是*逻辑链路或者数据链路*。

#### 一、两个链路
##### 物理链路
		物理层就是网卡(收发器)，和它搭配的光口(物理接口)以及物理传输介质。他们构建的物理链路还包括双方的通信规程等。这部分都是不可拆卸的，永久存在的。

##### 逻辑链路
		逻辑链路和物理链路不同，它可以永久存在，例如以太网链路，也可以是暂时的。

#### 二、存在目的
		在原始的，有差错的物理传输线路的基础上，采取差错检测和流量控制的方案，将有差错的物理链路改成逻辑上无差错的数据链路，一遍向他的上一层，网络层提供高质量的服务。
		数据链路层屏蔽或者刷选掉了，因为物理层中介差异和传输介质差异，甚至通信规章差异带来的数据差错。一来，他把上层的数据包变成数据帧，方便透过物理层传输；而来构建一条自下而上的，无差错数据通道。


#### 三、结构
		结构上，数据链路层分为两层：
		1、逻辑链路控制子层 LLC
		2、介质访问控制 MAC

![[Pasted image 20230223153903.png]]

		前者做数据流量控制，控制信号交换，解释上层命令并响应。
		后者负责数据传输。

_**简单理解这一层，就是数据包在这里，按照这一层的协议封装成了数据帧送出去**_


# PPP概述
>PPP协议是数据链路层封装协议的一种，他对数据的封装成为PPP封装。封装过后的的数据变成PPP帧，具体封装的内容如下。

![[Pasted image 20230223155006.png]]

##### 数据帧解析
- Flag
_Flag出现在一帧数据的头和尾，8位，固定为0x7e，用来标识数据的开始和结束，但这也产生了限制，也就是上层数据中不能存在0x7e，如果存在，则必须进行特殊形式的转义。_
- Address
_既不是IP也不是MAC，而是固定值0xFF_
- Control
_固定值0x03，无固定作用，预留的改进手段_
- Protocol
_表明上层数据的类型，采用什么协议封装的_
- FCS
_PPP协议的校验手段，如果FCS校验不通过，数据会被丢弃，并且没有重发机制。_.

##### PPP链路
_**一个不停互发报文直到连接建立的阶段**_

		通信方会依据PPP协议进行链路初始化，直到和物理层联通。联通后，通信双方互相发送LCP报文，进行参数协商，协商失败，则回到上一阶段，继续协商，如果协商成功，双方都要认证(也有不认证的)。
		之后，双方二次协商，主要协商网络成参数，例如IP地址，子网掩码等。协商成功，就可以开始发送数据了。
		数据发送完毕会关闭PPP链接。

		PPP协商认证有两种方式 PAP和CHAP
	   PAP则是明文认证，再安全性上有风险
	   CHAP则是密码报文认证



_**PPP协议在网卡和路由里**_
计算机本身是没有IP的，当他通过WIFI链接路由器，路由器就会通过PPP协议和网卡协商，分配给网卡一个IP地址，这才是PPP协议的主要用途，分配IP。拿到IP地址的计算机，就可以和路由点对点通信，通过路由进入互联网。










